(()=>{"use strict";function e(e,a){-1!==window.origin.indexOf("local")&&console.log(e,a)}(()=>{const e=jQuery;e(document).ready((function(){const a=e("#affwp-affiliate-dashboard");if(0===a.length)return!1;!function a(n){n.each((function(){const t=e(this);let i=t.hasClass("open-toggle");const o=t.find("button.realt-affiliate-toggle");o.siblings(),o.click((function(){t.siblings(".open-toggle").removeClass("open-toggle"),i?t.removeClass("open-toggle"):t.addClass("open-toggle"),a(n)}))}))}(a.find(".realt-affiliate-toggle-section"))}))})(),(()=>{const a=jQuery;a(document).ready((function(){const n=a("#affwp-affiliate-dashboard-payouts");if(0===n.length)return!1;function t(e,a){let n=a.find(".xdai_address_option_container"),t=a.find(".xdai_address_no_option_container"),o=a.find(".eth_address_no_option_container");"xdai"===e.val()&&(o.length>0&&o.addClass("no-show"),n.length>0?n.removeClass("no-show"):t.removeClass("no-show"),i(a)),"eth"===e.val()&&(o.length>0&&o.removeClass("no-show"),n.length>0&&n.addClass("no-show"),t.length>0&&t.addClass("no-show"))}function i(e){console.log("updating updateXdaiValueContainer");let a="";a=e.find(".xdai_address_option_container").length>0?e.find(".xdai_address_option_container select").val():e.find(".xdai_address_no_option_container a").attr("data-address");let n=e.find(".xdai_address_no_option_container .address-link"),t=function(e){let a=e.substr(0,8);return e.substr(e.length-8,e.length),a+"..."}(a);n.html(t);let i=`https://blockscout.com/xdai/mainnet/address/${a}`;n.attr("href",i),n.attr("data-address",a)}!function(e){e.find("#realt-affiliate-request-payout-button").click((function(){a(this).addClass("no-display"),e.find("#realt-affiliate-request-payout-button-cancel").removeClass("no-display"),e.find("#realt-affiliate-request-payout-button-confirm").removeClass("no-display")}))}(n),function(e){e.find("#realt-affiliate-request-payout-button-cancel").click((function(){a(this).addClass("no-display"),e.find("#realt-affiliate-request-payout-button-confirm").addClass("no-display"),e.find("#realt-affiliate-request-payout-button").removeClass("no-display")}))}(n),function(e){e.find("#realt-affiliate-request-payout-button-confirm").click((function(){let n=e.find(".walletless-payout-description").length>0;e.find("input[name ='payout-network-type']:checked").val()||n?(a(this).addClass("no-display"),e.find("#realt-affiliate-request-payout-button-cancel").addClass("no-display"),o(e)):e.find(".network-message").removeClass("no-display")}))}(n),function(e){e.find("input[name ='payout-network-type']").change((function(){t(a(this),e)}))}(n),function(e){e.find(".xdai_address_option_container select").change((function(){i(e)}))}(n),function(e){t(e.find("input[name ='payout-network-type']:checked"),e)}(n);const o=async a=>{a.find("#realt-affiliate-request-payout-button").addClass("no-display");let n=a.find(".payout-section .fa-spinner-third");n.removeClass("no-display"),n.addClass("active");let t=a.find(".payout-section .error-message"),i=a.find(".payout-section .success-message");a.find(".network-message").addClass("no-display"),a.find(".payout-network-container").addClass("no-display");let o=a.find("input[name ='payout-network-type']:checked").val(),s="xdai"===o?a.find(".xdai_address_no_option_container a").attr("data-address"):a.find(".eth_address_no_option_container a").attr("data-address");const r=(c="affiliate_dashboard_data",window[c]?window[c]:{});var c;let l={action:"generate_affiliate_payout_request",affiliate_dashboard_nonce:r.affiliate_dashboard_nonce,network_type:o,payout_address:s,currency:"USDC"};try{const a=await async function(a,n){e("fetchWP has ajax_url:",a),e("fetchWP has submission:",n);const t=jQuery;try{const i=await fetch(a,{credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:t.param(n)});if(e("fetchWP has res:",i),i.ok)return i.json();throw new Error("Bad Ajax response.")}catch(e){return console.error("There was an Ajax error:",e),e}}(r.ajax_url+"?call=generate_affiliate_payout_request",l);if(console.log("here is res",a),"success"!==a.result)throw new Error(a.message);i.removeClass("no-display"),n.addClass("no-display"),n.removeClass("active"),setTimeout((function(){window.location.reload()}),3e3)}catch(e){n.addClass("no-display"),n.removeClass("active"),t.removeClass("no-display"),t.html(e.message),console.log("here is err in payout request",e)}}}))})(),(()=>{const e=jQuery;e(document).ready((function(){const a=e("body").find("#affiliate-tos-wrapper"),n=e(".affiliate-signup-modal");function t(e,a,n){e.prop("checked",!1),a.prop("disabled",!0),n.css({visibility:"hidden"})}function i(e,a){e.css({opacity:"0",display:"none"}),a.css({opacity:"1",display:"block"})}function o(a){const n=a.find(".header").clone(!0),t=a.find(".body").clone(!0),i=a.find(".footer").clone(!0),o=e("#affiliate-signup-shortcode"),s=o.find(".header"),r=o.find(".body"),c=o.find(".footer");s.replaceWith(n),r.replaceWith(t),c.replaceWith(i)}a.length>0?(e("body").prepend(n),e("body").prepend(a),function(e){e.find(".intro a.close").click((function(a){a.preventDefault(),e.css({display:"none",opacity:"0"}),e.find("p.error").remove()}))}(a),function(e){const a=e.find("#accept-tos"),n=e.find("#accept-button");a.change((function(){a.is(":checked")?n.prop("disabled",!1):n.prop("disabled",!0)}))}(a),function(a){a.find("#accept-button").click((()=>{!function(a){if(!a.find("#accept-tos").prop("checked"))return!1;!function(a){const n=a.find(".lds-blocks"),s=a.find("#accept-button"),r=a.find("#accept-tos");n.css({visibility:"visible"}),s.prop("disabled",!0);const{ajax_url:c,affiliate_signup_nonce:l,wp_user_id:f=0}=(p="affiliate_signup_data",window[p]?window[p]:{}),d={action:"handle_user_accept_TOS",affiliate_signup_nonce:l,wp_user_id:f};var p;e.post(c+"?call=handle_user_accept_TOS",d,(c=>{const l=JSON.parse(c);if(!l)return void console.log("doAcceptTOS failed to parse the JSON data.");if("success"===l.result&&"pending"===l.status){const c=e("#tos-pending-affiliate-modal");return i(a,c),o(c),t(r,s,n),!0}if("success"===l.result&&"active"===l.status){const c=e("#tos-active-affiliate-modal");return i(a,c),o(c),t(r,s,n),!0}console.error("acceptTOS failed:",l);const f=e("#tos-error-response-modal");return i(a,f),t(r,s,n),!1}))}(a)}(a)}))}(a),function(){const a=e(".affiliate-signup-modal");a.find("button.close").click((()=>{a.css({opacity:"0",display:"none"})}))}(),e(".become-affiliate-button").click((()=>{e("#tos-read-now-modal").css({opacity:"1",display:"block"})})),function(a){e(".read-tos-button").click((()=>{e("#tos-read-now-modal").css({opacity:"0",display:"none"}),a.css({opacity:"1",display:"block"}).find(".et_builder_inner_content").first().scrollTop(0)}))}(a)):function(){const a=e("#accept-tos"),n=e("#accept-button");a.length>0&&a.parents(".et_pb_row").first().hide(),n.length>0&&n.parents(".et_pb_row").first().hide()}()}))})(),(()=>{const e=jQuery;e(document).ready((function(){var a=e.cookie("affwp_ref"),n=(e.cookie("affwp_ref_visit_id"),e.cookie("affwp_campaign"),AFFWP.referral_credit_last);if(1===AFFWP.debug){function e(e){var a=new RegExp(e+"=([^;]+)").exec(document.cookie);return null!=a&&unescape(a[1])}function a(){console.affwp("The following data is provided from AffiliateWP debug mode. To disable this information, please deactivate debug mode in AffiliateWP."),console.affwp("Available debug data: \n"+JSON.stringify(Object({ajax_url:affwp_scripts.ajaxurl.length?JSON.stringify(affwp_scripts.ajaxurl):"unavailable",ref:JSON.stringify(AFFWP.referral_var?AFFWP.referral_var:e("affwp_ref")),visit_cookie:e("affwp_ref_visit_id")?JSON.stringify(e("affwp_ref_visit_id")):"unavailable",credit_last:AFFWP.referral_credit_last?JSON.stringify(AFFWP.referral_credit_last):"unavailable",campaign:JSON.stringify(l().campaign?l().campaign:e("affwp_campaign")),currency:affwp_debug_vars.currency.length?JSON.stringify(affwp_debug_vars.currency):"unavailable",version:affwp_debug_vars.version.length?JSON.stringify(affwp_debug_vars.version):"unavailable"}))),console.affwp("Integrations\n"+JSON.stringify(Object("undefined"!=typeof affwp_debug_vars&&affwp_debug_vars.integrations)))}var t=["background: transparent","border-bottom: 2px solid #E34F43","color: black","display: block","line-height: 18px","text-align: left","margin: 4px","font-weight: bold"].join(";");console.affwp=function(){Array.prototype.unshift.call(arguments,"%c * AffiliateWP: ",t+" *"),console.log.apply(console,arguments)},a()}if("1"==n||!a){var i=l()[AFFWP.referral_var],o=l().campaign;if(void 0===i||e.isFunction(i)){var s=window.location.pathname.split("/");e.each(s,(function(e,a){AFFWP.referral_var==a&&(i=s[e+1])}))}e.isFunction(i)||(void 0===i||e.isNumeric(i)?i&&!a?r(i,o):"1"==n&&i&&a&&i!==a&&(e.removeCookie("affwp_ref"),r(i,o)):e.ajax({type:"POST",data:{action:"affwp_get_affiliate_id",affiliate:i},url:affwp_scripts.ajaxurl,success:function(t){"1"==t.data.success&&("1"==n&&a&&a!=t.data.affiliate_id&&e.removeCookie("affwp_ref"),("1"==n&&a&&a!=t.data.affiliate_id||!a)&&r(t.data.affiliate_id,o))}}).fail((function(e){window.console&&window.console.log&&console.log(e)})))}function r(a,n){c("affwp_ref",a),e.ajax({type:"POST",data:{action:"affwp_track_visit",affiliate:a,campaign:n,url:document.URL,referrer:document.referrer},url:affwp_scripts.ajaxurl,success:function(e){c("affwp_ref_visit_id",e),c("affwp_campaign",n)}}).fail((function(e){window.console&&window.console.log&&console.log(e)}))}function c(a,n){"cookie_domain"in AFFWP?e.cookie(a,n,{expires:AFFWP.expiration,path:"/",domain:AFFWP.cookie_domain}):e.cookie(a,n,{expires:AFFWP.expiration,path:"/"})}function l(){for(var e,a=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),t=0;t<n.length;t++){e=n[t].split("="),a.push(e[0]);var i=void 0===e[1]?0:1,o=e[i].indexOf("#");e[i]=e[i].substring(0,-1!=o?o:e[i].length),a[e[0]]=e[i]}return a}}))})()})();